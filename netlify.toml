# netlify.toml

[build]
  publish = "." # 或实际的前端输出目录
  command = "echo 'No client build command'" # 如果前端纯静态或只有dev构建指令
  functions = "netlify/functions" # 你的 Netlify Functions 代码存放的目录

[[headers]]
  for = "/.netlify/functions/*" # 对所有函数路径应用 CORS Headers
  [headers.values]
    Access-Control-Allow-Origin = "https://honoka1.netlify.app" # ！！！务必替换为你的 Netlify 站点域名！！！
    Access-Control-Allow-Methods = "GET, POST, OPTIONS"
    Access-Control-Allow-Headers = "Content-Type"
    Access-Control-Max-Age = "86400"

[[redirects]] # 处理 OPTIONS 请求（CORS预检），重要！
  from = "/.netlify/functions/*"
  to = "/.netlify/functions/:splat"
  status = 200
  conditions = {Method = ["OPTIONS"]}

# 如果有多个函数，需要设置单独的 Node.js 版本（推荐）
# [functions]
#   node_bundler = "esbuild" # 推荐使用 esbuild
#   node_version = "18" # 或最新的稳定版本如 "20"

